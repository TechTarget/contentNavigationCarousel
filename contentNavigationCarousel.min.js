/*!
 * Content Navigation Carousel v0.5 (http://okize.github.com/)
 * Copyright (c) 2012 | Licensed under the MIT license - http://www.opensource.org/licenses/mit-license.php
 */(function(e,t,n){"use strict";function s(t,n){this.element=t,this.options=e.extend({},i,n),this._defaults=i,this._name=r,this.init()}var r="contentNavigationCarousel",i={autoplay:!0,autoplaySpeed:1e4,mouseEvent:"click",switchSpeed:500,equalizeHeights:!0};s.prototype.init=function(){var n=this.options,r=e(this.element),i=r.find(".contentCollection"),s=0,o=i.find(".contentItem"),u=0,a=0,f=o.find(".contentLink"),l=e("<div />",{"class":"contentNavigation"}),c=0,h,p=0,d,v=-1,m=0,g=r.attr("data-autoplay"),y={start:function(){this.timer=setTimeout(e.proxy(this.pause,this),n.autoplaySpeed)},pause:function(){this.interval=t.setInterval(e.proxy(this.checkMouseLocation,this),500)},checkMouseLocation:function(){h.eq(v).find("a").data("mouse")!=="on"&&(clearInterval(this.interval),this.getNextItem())},getNextItem:function(){m=m===p-1?0:m+1,b(m)},stop:function(){clearTimeout(this.timer)}},b=function(e){h.eq(e).find("a").trigger(n.mouseEvent,["triggered"])},w=function(t,r){n.autoplay&&y.stop(),n.mouseEvent==="click"&&t.preventDefault(),d=e(this),r==="triggered"&&d.data("mouse","off"),m=d.data("index"),h.removeClass("active"),h.eq(m).addClass("active"),m!==v&&(o.eq(v).fadeOut(n.switchSpeed/2,function(){o.eq(m).fadeIn(n.switchSpeed/2)}),v=m),n.autoplay&&y.start()};g&&(g>0?(n.autoplay=!0,n.autoplaySpeed=g):(n.autoplay=!1,n.autoplaySpeed=0));if(f.length<=1)return;n.mouseEvent==="hover"&&(n.mouseEvent="mouseenter"),h=e.map(f,function(e,t){return p++,'<li><a href="'+e.href+'" data-index="'+t+'">'+(e.textContent||e.innerText)+"</a></li>"}),h=e(h.join("")),l.append(e("<ul>").append(h)).insertAfter(i),c=l.height(),s=Math.max.apply(null,o.map(function(){return e(this).height()}).get()),i.css("overflow")==="hidden"&&i.height(s),n.equalizeHeights&&(c>s?i.height(c):l.height(s)),o.each(function(){u=e(this).height(),a=Math.round((c-u)/2),e(this).css({display:"none",top:a+"px"})}),h.on({mouseenter:function(){e(this).data("mouse","on")},mouseleave:function(){e(this).data("mouse","off")}},"a"),h.on(n.mouseEvent,"a",w),b(m)},e.fn[r]=function(t){return this.each(function(){e.data(this,"plugin_"+r)||e.data(this,"plugin_"+r,new s(this,t))})}})(jQuery,window);